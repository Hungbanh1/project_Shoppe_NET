@model BaiTapLonWeb.Models.CartModel


<body>
  
    <div id="wrapper">

        @if (string.IsNullOrEmpty(Session["Email"]?.ToString()))
        {
            @Html.Partial("_HeaderCart")
        }
        else
        {

            @Html.Partial("_HeaderCart_after_login")
        }
        <div class="wp-content-cart hr-red">
            <div class="wp-set-auto-screen auto">
                <!-- // vouncher  -->
                <div id="click-vouncher">
                    <div class="click-vouncher-noti auto-dlf">
                        <div class="logo-express-free pr-10">
                            <svg height="23" viewBox="0 0 20 12" width="28"
                                 class="MCA-wE icon-free-shipping">
                                <g fill="none" fill-rule="evenodd"
                                   transform="">
                                    <rect fill="#00bfa5"
                                          fill-rule="evenodd" height="9"
                                          rx="1" width="12" x="4">
                                    </rect>

                                    <rect height="8" rx="1" stroke="#00bfa5"
                                          width="11" x="4.5" y=".5"></rect>
                                    <rect fill="#00bfa5" fill-rule="evenodd"
                                          height="7" rx="1" width="7" x="13"
                                          y="2"></rect>
                                    <rect height="6" rx="1"
                                          stroke="#00bfa5" width="6" x="13.5"
                                          y="2.5"></rect>
                                    <circle cx="8"
                                            cy="10" fill="#00bfa5" r="2"></circle>
                                    <circle cx="15" cy="10" fill="#00bfa5"
                                            r="2"></circle>
                                    <path d="m6.7082481
                                     6.7999878h-.7082481v-4.2275391h2.8488017v.5976563h-2.1405536v1.2978515h1.9603297v.5800782h-1.9603297zm2.6762505
                                     0v-3.1904297h.6544972v.4892578h.0505892c.0980164-.3134765.4774351-.5419922.9264138-.5419922.0980165
                                     0
                                     .2276512.0087891.3003731.0263672v.6210938c-.053751-.0175782-.2624312-.038086-.3762568-.038086-.5122152
                                     0-.8758247.3017578-.8758247.75v1.8837891zm3.608988-2.7158203c-.5027297
                                     0-.8536919.328125-.8916338.8261719h1.7390022c-.0158092-.5009766-.3446386-.8261719-.8473684-.8261719zm.8442065
                                     1.8544922h.6544972c-.1549293.571289-.7050863.9228515-1.49238.9228515-.9864885
                                     0-1.5903965-.6269531-1.5903965-1.6464843
                                     0-1.0195313.6165553-1.6669922
                                     1.5872347-1.6669922.9580321 0
                                     1.5366455.6064453 1.5366455
                                     1.6083984v.2197266h-2.4314412v.0351562c.0221328.5595703.373095.9140625.9169284.9140625.4110369
                                     0
                                     .6924391-.1376953.8189119-.3867187zm2.6224996-1.8544922c-.5027297
                                     0-.853692.328125-.8916339.8261719h1.7390022c-.0158091-.5009766-.3446386-.8261719-.8473683-.8261719zm.8442064
                                     1.8544922h.6544972c-.1549293.571289-.7050863.9228515-1.49238.9228515-.9864885
                                     0-1.5903965-.6269531-1.5903965-1.6464843
                                     0-1.0195313.6165553-1.6669922
                                     1.5872347-1.6669922.9580321 0
                                     1.5366455.6064453 1.5366455
                                     1.6083984v.2197266h-2.4314412v.0351562c.0221328.5595703.373095.9140625.9169284.9140625.4110369
                                     0
                                     .6924391-.1376953.8189119-.3867187z"
                                          fill="#fff"></path>
                                    <path d="m .5
                                     8.5h3.5v1h-3.5z" fill="#00bfa5"></path>
                                    <path d="m0 10.15674h3.5v1h-3.5z"
                                          fill="#00bfa5"></path>
                                    <circle cx="8"
                                            cy="10" fill="#047565" r="1"></circle>
                                    <circle cx="15" cy="10" fill="#047565"
                                            r="1"></circle>
                                </g>
                            </svg>

                        </div>
                        <div class="text-click-vouncher">
                            <span>
                                Nhấn vào mục Mã giảm giá ở cuối trang để
                                hưởng miễn phí vận chuyển bạn nhé!
                            </span>
                        </div>
                    </div>
                </div>
                @if (Model == null || Model.Items == null)
                {


                    <h1 style="text-align:center">Giỏ hàng của bạn đang rỗng</h1>

                }
                else
                {
                    <!-- // header-cart-order  -->
                    <div class="header-your-cart auto-dlf mb-12">

                        <div class="sp-text fs-17">Sản phẩm</div>
                        <div class="unit-price-text fs-17">Đơn Giá</div>
                        <div class="qty-text fs-17">Số Lượng</div>
                        <div class="amount-text fs-17">Số Tiền</div>
                        <div class="opera-text fs-17">Thao Tác</div>

                    </div>
                    <!-- //wp-shop -->

                    foreach (var item in Model.Items)
                    {
                        double total = Convert.ToDouble(item._products.ProductPrice.Value * item.Amount);
                        double price = Convert.ToDouble(item._products.ProductPrice.Value);
                        <div id="wp-shop" class="mb-1">

                            <div id="main-shop" class="header-your-cart auto-dlf">

                                <div id="shop" class="sp-text fs-17 d-fl">
                                    <div class="image-product">
                                        <img src="~/public/images/@item._products.ProductImage" width="80px" height="80px" />
                                    </div>
                                    <div class="product-name">
                                        <a href="" class="product-name-link">
                                            @item._products.ProductName

                                        </a>
                                    </div>
                                </div>

                                <div class="unit-price-text fs-17">@price.ToString("#,##0").Replace(',', '.') VNĐ</div>
                                <form action="/ShopeeCart/UpdateAmount" method="post" style=" width: 220px;">
                                    <input type="hidden" value="@item._products.ProductID" name="ID_Product">
                                    <input type="number" value="@item.Amount" name="Amount">
                                    <input type="submit" value="Update Amount" class="update_qty">
                                </form>
                                    <div class="amount-text fs-17 red">@total.ToString("#,##0").Replace(',', '.') VNĐ</div>

                                    <div id="delete_cart" class="opera-text fs-17">
                                        <a class="mr-12" href="/ShopeeCart/RemoveItem/@item._products.ProductID">
                                            Xóa
                                        </a>
                                    </div>

                                </div>
                        </div>
                    }


            <div id="payment">
            
                <div id="shoppe-vouncher" class="header-your-cart
                            auto-dlf justi-end mt-3">
                    <!-- <div class="shoppe-vouncher"> -->


                    <svg height="23px" width="28px" fill="none"
                         viewBox="0 -2 23 22"
                         class="icon-shoppe-vouncher icon-voucher-line">
                        <g filter="url(#voucher-filter0_d)">
                            <mask id="a" fill="#fff">
                                <path fill-rule="evenodd"
                                      clip-rule="evenodd" d="M1
                                            2h18v2.32a1.5 1.5 0 000
                                            2.75v.65a1.5 1.5 0 000
                                            2.75v.65a1.5 1.5 0 000
                                            2.75V16H1v-2.12a1.5 1.5 0
                                            000-2.75v-.65a1.5 1.5 0
                                            000-2.75v-.65a1.5 1.5 0
                                            000-2.75V2z"></path>
                            </mask>
                            <path d="M19 2h1V1h-1v1zM1 2V1H0v1h1zm18
                                        2.32l.4.92.6-.26v-.66h-1zm0
                                        2.75h1v-.65l-.6-.26-.4.91zm0
                                        .65l.4.92.6-.26v-.66h-1zm0
                                        2.75h1v-.65l-.6-.26-.4.91zm0
                                        .65l.4.92.6-.26v-.66h-1zm0
                                        2.75h1v-.65l-.6-.26-.4.91zM19
                                        16v1h1v-1h-1zM1
                                        16H0v1h1v-1zm0-2.12l-.4-.92-.6.26v.66h1zm0-2.75H0v.65l.6.26.4-.91zm0-.65l-.4-.92-.6.26v.66h1zm0-2.75H0v.65l.6.26.4-.91zm0-.65l-.4-.92-.6.26v.66h1zm0-2.75H0v.65l.6.26.4-.91zM19
                                        1H1v2h18V1zm1 3.32V2h-2v2.32h2zm-.9
                                        1.38c0-.2.12-.38.3-.46l-.8-1.83a2.5
                                        2.5 0 00-1.5 2.29h2zm.3.46a.5.5 0
                                        01-.3-.46h-2c0 1.03.62 1.9 1.5
                                        2.3l.8-1.84zm.6
                                        1.56v-.65h-2v.65h2zm-.9
                                        1.38c0-.2.12-.38.3-.46l-.8-1.83a2.5
                                        2.5 0 00-1.5 2.29h2zm.3.46a.5.5 0
                                        01-.3-.46h-2c0 1.03.62 1.9 1.5
                                        2.3l.8-1.84zm.6
                                        1.56v-.65h-2v.65h2zm-.9
                                        1.38c0-.2.12-.38.3-.46l-.8-1.83a2.5
                                        2.5 0 00-1.5 2.29h2zm.3.46a.5.5 0
                                        01-.3-.46h-2c0 1.03.62 1.9 1.5
                                        2.3l.8-1.84zM20 16v-2.13h-2V16h2zM1
                                        17h18v-2H1v2zm-1-3.12V16h2v-2.12H0zm1.4.91a2.5
                                        2.5 0 001.5-2.29h-2a.5.5 0
                                        01-.3.46l.8 1.83zm1.5-2.29a2.5 2.5 0
                                        00-1.5-2.3l-.8
                                        1.84c.18.08.3.26.3.46h2zM0
                                        10.48v.65h2v-.65H0zM.9 9.1a.5.5 0
                                        01-.3.46l.8 1.83A2.5 2.5 0 002.9
                                        9.1h-2zm-.3-.46c.18.08.3.26.3.46h2a2.5
                                        2.5 0 00-1.5-2.3L.6 8.65zM0
                                        7.08v.65h2v-.65H0zM.9 5.7a.5.5 0
                                        01-.3.46l.8 1.83A2.5 2.5 0 002.9
                                        5.7h-2zm-.3-.46c.18.08.3.26.3.46h2a2.5
                                        2.5 0 00-1.5-2.3L.6 5.25zM0
                                        2v2.33h2V2H0z" mask="url(#a)"></path>
                        </g>
                        <path clip-rule="evenodd" d="M6.49
                                    14.18h.86v-1.6h-.86v1.6zM6.49
                                    11.18h.86v-1.6h-.86v1.6zM6.49
                                    8.18h.86v-1.6h-.86v1.6zM6.49
                                    5.18h.86v-1.6h-.86v1.6z"></path>
                        <defs>
                            <filter id="voucher-filter0_d" x="0" y="1"
                                    width="20" height="16"
                                    filterUnits="userSpaceOnUse"
                                    color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0"
                                         result="BackgroundImageFix"></feFlood>
                                <feColorMatrix in="SourceAlpha" values="0 0 0 0
                                            0 0 0 0 0 0 0 0 0 0 0 0 0 0 127
                                            0"></feColorMatrix>
                                <feOffset></feOffset>
                                <feGaussianBlur stdDeviation=".5"></feGaussianBlur>
                                <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0
                                            0 0 0 0 0 0 0.09 0"></feColorMatrix>
                                <feBlend in2="BackgroundImageFix"
                                         result="effect1_dropShadow"></feBlend>
                                <feBlend in="SourceGraphic"
                                         in2="effect1_dropShadow"
                                         result="shape"></feBlend>
                            </filter>
                        </defs>
                    </svg>
                    <div class="text-shoppe-vouncher">
                        Shopee Voucher
                    </div>
                    <span class="tick-or-in">Chọn Hoặc Nhập Mã</span>
                    <!-- </div> -->
                </div>
                <div id="payment-div-2" class="header-your-cart auto-dlf ml-3 justi-ween
                            mb-12 ">
                    <div class="cart-left d-fl">
                        <div class="delete_all">
                            <a href="/ShopeeCart/DeleteAll">
                                <button class="btn-delete-all">Xóa Tất</button>
                            </a>
                        </div>
                    </div>
                    <div class="cart-right d-fl">
                      
                
                        <div class="total-cart d-fl">
                            Tổng thanh toán : <div class="total">@Model.Total_Money().ToString("#,##0").Replace(',', '.') VNĐ</div>
                        </div>
                        <div class="buyy">
                          
                                <a href="/ShopeeCart/Payment">
                                    <button class="btn-buy">Mua hàng</button>
                                    @if (TempData["SuccessMessage"] != null)
                                    {
                                        <script>
                                            // Sử dụng SweetAlert2 để hiển thị MessageBox
                                            Swal.fire({
                                                icon: 'success',
                                                title: 'Thành công!',
                                                text: @Html.Raw(Json.Encode(TempData["SuccessMessage"])),
                                                timer: 5000, // 5 giây
                                                showConfirmButton: false
                                            });
                                            setTimeout(function () {
                                                window.location.href = '/Trang-Chu';
                                            }, 2000);
                                        </script>
                                    }
                                    @if (TempData["FailMessage"] != null)
                                    {
                                        <script>
                                            // Sử dụng SweetAlert2 để hiển thị MessageBox
                                            Swal.fire({
                                                icon: 'error',
                                                title: 'Thất Bại!',
                                                text: @Html.Raw(Json.Encode(TempData["FailMessage"])),
                                                timer: 3000, // 5 giây
                                                showConfirmButton: false
                                            });
                                        </script>
                                    }
                                    @if (TempData["AddressorPhoneNull"] != null)
                                    {
                                        <script>
                                            // Sử dụng SweetAlert2 để hiển thị MessageBox
                                            Swal.fire({
                                                icon: 'error',
                                                title: 'Thất Bại!',
                                                text: @Html.Raw(Json.Encode(TempData["AddressorPhoneNull"])),
                                                timer: 3000, // 5 giây
                                                showConfirmButton: false
                                            });
                                        </script>
                                    }
                                </a>
                            
                           
                        </div>

                    </div>


                </div>

            </div>
                }
            </div>
        </div>


        @Html.Partial("_Footer_not_every_thing")


    </div>


</body>
</html>